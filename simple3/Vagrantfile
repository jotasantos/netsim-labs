VAGRANT_COMMAND = ARGV[0]

Vagrant.configure("2") do |config|
  config.vm.provider :libvirt do |libvirt|
    libvirt.management_network_address = "192.168.121.0/24"
    libvirt.default_prefix = "simple3_"
  end
  config.vm.define "pe1" do |pe1|
    pe1.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-01"
      domain.qemu_use_session = false
    end
    pe1.vm.box = "arista/veos"
    pe1.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    pe1.ssh.insert_key = false
    pe1.ssh.shell = "bash"
    pe1.vm.guest = :freebsd

    pe1.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    pe1.vm.provider :libvirt do |domain|
    end

    pe1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.1",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.5",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_pe1_1",
                  auto_config: false
    pe1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.1",
                  :libvirt__tunnel_local_port => "10002",
                  :libvirt__tunnel_ip => "127.1.1.3",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_pe1_2",
                  auto_config: false
    pe1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.1",
                  :libvirt__tunnel_local_port => "10003",
                  :libvirt__tunnel_ip => "127.1.1.2",
                  :libvirt__tunnel_port => "10002",
                  :libvirt__iface_name => "vgif_pe1_3",
                  auto_config: false
    pe1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.1",
                  :libvirt__tunnel_local_port => "10004",
                  :libvirt__tunnel_ip => "127.1.1.3",
                  :libvirt__tunnel_port => "10004",
                  :libvirt__iface_name => "vgif_pe1_4",
                  auto_config: false
  end
  config.vm.define "pe2" do |pe2|
    pe2.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-02"
      domain.qemu_use_session = false
    end
    pe2.vm.box = "arista/veos"
    pe2.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    pe2.ssh.insert_key = false
    pe2.ssh.shell = "bash"
    pe2.vm.guest = :freebsd

    pe2.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    pe2.vm.provider :libvirt do |domain|
    end

    pe2.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.2",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.6",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_pe2_1",
                  auto_config: false
    pe2.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.2",
                  :libvirt__tunnel_local_port => "10002",
                  :libvirt__tunnel_ip => "127.1.1.1",
                  :libvirt__tunnel_port => "10003",
                  :libvirt__iface_name => "vgif_pe2_2",
                  auto_config: false
    pe2.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.2",
                  :libvirt__tunnel_local_port => "10003",
                  :libvirt__tunnel_ip => "127.1.1.3",
                  :libvirt__tunnel_port => "10002",
                  :libvirt__iface_name => "vgif_pe2_3",
                  auto_config: false
    pe2.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.2",
                  :libvirt__tunnel_local_port => "10004",
                  :libvirt__tunnel_ip => "127.1.1.3",
                  :libvirt__tunnel_port => "10005",
                  :libvirt__iface_name => "vgif_pe2_4",
                  auto_config: false
  end
  config.vm.define "p1" do |p1|
    p1.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-03"
      domain.qemu_use_session = false
    end
    p1.vm.box = "arista/veos"
    p1.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    p1.ssh.insert_key = false
    p1.ssh.shell = "bash"
    p1.vm.guest = :freebsd

    p1.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    p1.vm.provider :libvirt do |domain|
    end

    p1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.3",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.1",
                  :libvirt__tunnel_port => "10002",
                  :libvirt__iface_name => "vgif_p1_1",
                  auto_config: false
    p1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.3",
                  :libvirt__tunnel_local_port => "10002",
                  :libvirt__tunnel_ip => "127.1.1.2",
                  :libvirt__tunnel_port => "10003",
                  :libvirt__iface_name => "vgif_p1_2",
                  auto_config: false
    p1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.3",
                  :libvirt__tunnel_local_port => "10003",
                  :libvirt__tunnel_ip => "127.1.1.4",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_p1_3",
                  auto_config: false
    p1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.3",
                  :libvirt__tunnel_local_port => "10004",
                  :libvirt__tunnel_ip => "127.1.1.1",
                  :libvirt__tunnel_port => "10004",
                  :libvirt__iface_name => "vgif_p1_4",
                  auto_config: false
    p1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.3",
                  :libvirt__tunnel_local_port => "10005",
                  :libvirt__tunnel_ip => "127.1.1.2",
                  :libvirt__tunnel_port => "10004",
                  :libvirt__iface_name => "vgif_p1_5",
                  auto_config: false
  end
  config.vm.define "rr" do |rr|
    rr.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-04"
      domain.qemu_use_session = false
    end
    rr.vm.box = "arista/veos"
    rr.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    rr.ssh.insert_key = false
    rr.ssh.shell = "bash"
    rr.vm.guest = :freebsd

    rr.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    rr.vm.provider :libvirt do |domain|
    end

    rr.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.4",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.3",
                  :libvirt__tunnel_port => "10003",
                  :libvirt__iface_name => "vgif_rr_1",
                  auto_config: false
  end
  config.vm.define "ce1" do |ce1|
    ce1.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-05"
      domain.qemu_use_session = false
    end
    ce1.vm.box = "arista/veos"
    ce1.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    ce1.ssh.insert_key = false
    ce1.ssh.shell = "bash"
    ce1.vm.guest = :freebsd

    ce1.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    ce1.vm.provider :libvirt do |domain|
    end

    ce1.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.5",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.1",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_ce1_1",
                  auto_config: false
  end
  config.vm.define "ce2" do |ce2|
    ce2.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08-4F-A9-00-00-06"
      domain.qemu_use_session = false
    end
    ce2.vm.box = "arista/veos"
    ce2.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    ce2.ssh.insert_key = false
    ce2.ssh.shell = "bash"
    ce2.vm.guest = :freebsd

    ce2.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    ce2.vm.provider :libvirt do |domain|
    end

    ce2.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.6",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.2",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_ce2_1",
                  auto_config: false
  end
end
