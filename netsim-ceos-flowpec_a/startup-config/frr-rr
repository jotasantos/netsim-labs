frr version 7.5+cl4.3.0u1
frr defaults datacenter
hostname rr
log syslog informational
service integrated-vtysh-config
!
interface lo
 ip address 10.10.10.10/32
 ip ospf 1 area 0.0.0.0
!
interface swp1
 description rr -> ixp TEST
 ip address 10.1.8.10/24
 ip ospf 1 area 0.0.0.0
!
router bgp 65000 view RS
 bgp router-id 10.10.10.10
 no bgp default ipv4-unicast
 neighbor 10.1.8.1 remote-as 65001
 neighbor 10.1.8.2 remote-as 65002
 !
 address-family ipv4 unicast
  neighbor 10.1.8.1 activate
  neighbor 10.1.8.1 soft-reconfiguration inbound
  neighbor 10.1.8.1 route-server-client
  neighbor 10.1.8.2 activate
  neighbor 10.1.8.2 soft-reconfiguration inbound
  neighbor 10.1.8.2 route-server-client
 exit-address-family
!
router ospf 1
 ospf router-id 10.10.10.10
!
ip prefix-list COMMON-PREFIXES seq 5 permit 10.20.0.0/16 le 32
ip prefix-list COMMON-PREFIXES seq 10 deny any
ip prefix-list PEER-C-PREFIXES seq 5 permit 10.23.0.0/16 le 32
ip prefix-list PEER-C-PREFIXES seq 10 deny any
ip prefix-list PEER-A-PREFIXES seq 5 permit any
ip prefix-list PEER-B-PREFIXES seq 5 permit any
!
route-map RSCLIENT-A-IMPORT permit 10
 call A-IMPORT-FROM-B
 match peer 2.2.2.2
!
route-map RSCLIENT-B-IMPORT permit 10
 call B-IMPORT-FROM-A
 match peer 1.1.1.1
!
route-map A-IMPORT-FROM-B permit 10
 match ip address prefix-list COMMON-PREFIXES
 set metric 100
!
route-map A-IMPORT-FROM-B permit 20
 match ip address prefix-list PEER-B-PREFIXES
 set community 65001:11111
!
route-map B-IMPORT-FROM-A permit 10
 match ip address prefix-list COMMON-PREFIXES
 set metric 100
!
route-map B-IMPORT-FROM-A permit 20
 match ip address prefix-list PEER-B-PREFIXES
 set community 65001:22222
!
route-map RSCLIENT-A-EXPORT permit 10
 match ip address prefix-list PEER-A-PREFIXES
 match peer 2.2.2.2
!
route-map RSCLIENT-B-EXPORT permit 10
 match ip address prefix-list PEER-A-PREFIXES
 match peer 1.1.1.1
!
line vty
!
