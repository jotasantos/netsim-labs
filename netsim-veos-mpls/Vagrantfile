VAGRANT_COMMAND = ARGV[0]

Vagrant.configure("2") do |config|
  config.vm.provider :libvirt do |libvirt|
    libvirt.management_network_address = "192.168.121.0/24"
    libvirt.default_prefix = "netsim-veos-_"
  end
  config.vm.define "sfp01" do |sfp01|
    sfp01.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08:4f:a9:00:00:01"
      domain.qemu_use_session = false
    end
    sfp01.vm.box = "arista/veos"
    sfp01.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    sfp01.ssh.insert_key = false
    sfp01.ssh.shell = "bash"
    sfp01.vm.guest = :freebsd

    sfp01.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    sfp01.vm.provider :libvirt do |domain|
    end

    sfp01.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.1",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.2",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_sfp01_1",
                  auto_config: false

  
  end
  config.vm.define "edz" do |edz|
    edz.vm.provider :libvirt do |domain|
      domain.management_network_mac = "08:4f:a9:00:00:02"
      domain.qemu_use_session = false
    end
    edz.vm.box = "arista/veos"
    edz.vm.synced_folder ".", "/vagrant", id: "vagrant-root", disabled: true
    edz.ssh.insert_key = false
    edz.ssh.shell = "bash"
    edz.vm.guest = :freebsd

    edz.vm.provider :libvirt do |domain|
      domain.disk_bus = 'ide'
      domain.cpus = 2
      domain.memory = 2048
      domain.driver = "kvm"
    end
    edz.vm.provider :libvirt do |domain|
    end

    edz.vm.network :private_network,
                  :libvirt__tunnel_type => "udp",
                  :libvirt__tunnel_local_ip => "127.1.1.2",
                  :libvirt__tunnel_local_port => "10001",
                  :libvirt__tunnel_ip => "127.1.1.1",
                  :libvirt__tunnel_port => "10001",
                  :libvirt__iface_name => "vgif_edz_1",
                  auto_config: false

  
  end
end
